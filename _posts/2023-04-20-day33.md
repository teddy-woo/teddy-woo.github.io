---
date: 2023-04-20 00:00:00
layout: post
title: DevOps&#91;Day33&#93; / [ì§€ì†ì  í†µí•©]
subtitle: 'Github Action ê¸°ì´ˆ'
description: Github Action ê¸°ì´ˆ
image: /git.png
optimized_image: /git.png
category: ì§€ì†ì  í†µí•©
tags:
  - Github
  - Github Action
  - ìë™í™”
  - ì§€ì†ì  í†µí•©
  - DevOps BootCamp
author: teddy-woo

---

![](https://velog.velcdn.com/images/dnehgus6975/post/cbf90eca-d4d5-4794-a242-893a3386a946/image.png)
## Github Actionì´ë€?
Github Actionì€ githubì—ì„œ ê³µì‹ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” CI/CD íˆ´, ë‹¤ì‹œ ë§í•´ ê°œë°œì˜ work flowë¥¼ ìë™í™”í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” íˆ´ì´ë‹¤.

### CI/CDë€?
CIëŠ” Continuous Integration(ì§€ì†ì  í†µí•©), CDëŠ” Continuous Delivery(ì§€ì†ì  ì „ë‹¬)ì˜ ì¤„ì„ë§ì´ë‹¤.

>CI : í…ŒìŠ¤íŠ¸, ë¹Œë“œ, Dockerizing, ì €ì¥ì†Œì— ì „ë‹¬í•˜ëŠ” ê²ƒê¹Œì§€ í”„ë¡œë•ì…˜ í™˜ê²½ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•  ìˆ˜ ìˆë„ë¡ ì¤€ë¹„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤
CD : ì €ì¥ì†Œë¡œ ì „ë‹¬ëœ í”„ë¡œë•ì…˜ ì„œë¹„ìŠ¤ë¥¼ ì‹¤ì œ ì‚¬ìš©ìë“¤ì—ê²Œ ë°°í¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤
ì‘ì—…í•œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¹Œë“œí•˜ê³ , ì €ì¥ì†Œì— ì „ë‹¬ í›„ ë°°í¬ê¹Œì§€ í•˜ëŠ” ê³¼ì •ì„ í†µìƒì ìœ¼ë¡œ CI/CDë¼ê³  ë¶€ë¥¸ë‹¤.

### Github Actionì˜ ì½”ì–´ ê°œë…
#### - Workflow
ìë™í™”ëœ ì „ì²´ í”„ë¡œì„¸ìŠ¤. í•˜ë‚˜ ì´ìƒì˜ Jobìœ¼ë¡œ êµ¬ì„±ë˜ê³ , Eventì— ì˜í•´ ì˜ˆì•½ë˜ê±°ë‚˜ íŠ¸ë¦¬ê±°ë  ìˆ˜ ìˆëŠ” ìë™í™”ëœ ì ˆì°¨ë¥¼ ë§í•œë‹¤.
Workflow íŒŒì¼ì€ YAMLìœ¼ë¡œ ì‘ì„±ë˜ê³ , Github Repositoryì˜ .github/workflows í´ë” ì•„ë˜ì— ì €ì¥ëœë‹¤. Githubì—ê²Œ YAML íŒŒì¼ë¡œ ì •ì˜í•œ ìë™í™” ë™ì‘ì„ ì „ë‹¬í•˜ë©´, Github ActionsëŠ” í•´ë‹¹ íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì‹¤í–‰ì‹œí‚¨ë‹¤.

#### - Event
Workflowë¥¼ íŠ¸ë¦¬ê±°(ì‹¤í–‰)í•˜ëŠ” íŠ¹ì • í™œë™ì´ë‚˜ ê·œì¹™. ì˜ˆë¥¼ ë“¤ì–´, ëˆ„êµ°ê°€ê°€ ì»¤ë°‹ì„ ë¦¬í¬ì§€í† ë¦¬ì— í‘¸ì‹œí•˜ê±°ë‚˜ í’€ ìš”ì²­ì´ ìƒì„± ë  ë•Œ GitHubì—ì„œ í™œë™ì´ ì‹œì‘ë  ìˆ˜ ìˆë‹¤.

#### - Job
Jobì€ ì—¬ëŸ¬ Stepìœ¼ë¡œ êµ¬ì„±ë˜ê³ , ë‹¨ì¼ ê°€ìƒ í™˜ê²½ì—ì„œ ì‹¤í–‰ëœë‹¤. ë‹¤ë¥¸ Jobì— ì˜ì¡´ ê´€ê³„ë¥¼ ê°€ì§ˆ ìˆ˜ë„ ìˆê³ , ë…ë¦½ì ìœ¼ë¡œ ë³‘ë ¬ë¡œ ì‹¤í–‰ë  ìˆ˜ë„ ìˆë‹¤.

#### - Step
Job ì•ˆì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ ë‹¨ìœ„. stepì—ì„œ ëª…ë ¹ì„ ë‚´ë¦¬ê±°ë‚˜, actionì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

#### - Action
jobì„ êµ¬ì„±í•˜ê¸° ìœ„í•œ stepë“¤ì˜ ì¡°í•©ìœ¼ë¡œ êµ¬ì„±ëœ ë…ë¦½ì ì¸ ëª…ë ¹. workflowì˜ ê°€ì¥ ì‘ì€ ë¹Œë“œ ë‹¨ìœ„ì´ë‹¤. workflowì—ì„œ actionì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” actionì´ stepì„ í¬í•¨í•´ì•¼ í•œë‹¤. actionì„ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ ë ˆí¬ì§€í† ë¦¬ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ì»¤ìŠ¤í…€ ì½”ë“œë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤. ì‚¬ìš©ìê°€ ì§ì ‘ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê±°ë‚˜, ë§ˆì¼“í”Œë ˆì´ìŠ¤ì— ìˆëŠ” actionì„ ê°€ì ¸ë‹¤ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤. (ë” ìì„¸í•œ ì„¤ëª…ì€ ì•„ë˜ì—!)

#### - Runner
Gitbub Action Runner ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì„¤ì¹˜ëœ ë¨¸ì‹ ìœ¼ë¡œ, Workflowê°€ ì‹¤í–‰ë  ì¸ìŠ¤í„´ìŠ¤

### Github Action ìƒì„±í•´ë³´ê¸°
Github Actionì€ event, job, stepì„ ì •ì˜í•˜ê¸° ìœ„í•´ YAML íŒŒì¼ì„ ì‚¬ìš©í•œë‹¤. workflowë¥¼ êµ¬ì„±í•  ë ˆí¬ì§€í† ë¦¬ì— .github/workflows ë””ë ‰í† ë¦¬ ì•ˆì— test-github-actions.yml í˜•íƒœë¡œ íŒŒì¼ì„ ìƒì„±í•œë‹¤.

ì•„ë˜ ì˜ˆì‹œë¥¼ ë³´ì.
```yml
name: learn-github-actions
on:
    push:
      branches: [ master, dev ]
    pull_request:
      branches: [ master ]
      paths:
        - "**.js"
      paths-ignore:
        - "doc/**"
jobs:
  build:
    strategy:
      matrix:
        node-version: [10.x, 12.x]

    runs-on: ubuntu-latest
    steps:
      - name: Checkout source code
        uses: actions/checkout@v2
        
      - name: My First Step
        run:
          npm install
          npm test
          npm build

      - name: Cache yarn dependencies
        uses: actions/cache@v1
        id: yarn-cache
        with:
          path: node_modules
          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}
          restore-keys: |
            ${{ runner.os }}-yarn-
 ```
í•œ ë¶€ë¶„ì”© íŒŒì¼ ì„¤ì •ì„ ì‚´í´ë³´ì.
```yml
name: learn-github-actions 
```
ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬ì˜ ì•¡ì…˜ íƒ­ì— ë…¸ì¶œë˜ëŠ” workflowì˜ ì´ë¦„. ì˜µì…”ë„í•œ ê°’ì´ë‹¤.
```yml
on:
    push:
      branches: [ master, dev ]
    pull_request:
      branches: [ master ]
      paths:
        - "**.js"
      paths-ignore:
        - "doc/**"
```
workflow íŒŒì¼ì„ ìë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ëª…ì‹œí•œë‹¤. push ì´ë²¤íŠ¸ë¥¼ ëª…ì‹œí•˜ë©´, ëˆ„êµ°ê°€ê°€ ê¹ƒ ë ˆí¬ì§€í† ë¦¬ì— ë³€ê²½ì‚¬í•­ì„ push í•˜ëŠ” ì‹œì ë§ˆë‹¤ jobì´ ì‹¤í–‰ëœë‹¤.
íŠ¹ì •í•œ ë¸Œëœì¹˜ë‚˜, tagë‚˜, pathì—ì„œë§Œ ì‹¤í–‰ë˜ë„ë¡ í•  ìˆ˜ë„ ìˆë‹¤. ìœ„ ì½”ë“œì²˜ëŸ¼ pathsë¡œ íŠ¹ì • íŒ¨í„´ì„ ì„¤ì •í•˜ì—¬ í•´ë‹¹ íŒ¨í„´ì— ì¼ì¹˜í•˜ëŠ” íŒŒì¼ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ workflowê°€ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ë„ ìˆê³ , !pathsë‚˜ paths-ignoreë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬´ì‹œí•  íŒ¨í„´ì„ ì„¤ì •í•  ìˆ˜ë„ ìˆë‹¤.
```yml
jobs:
  build:
    strategy:
      matrix:
        node-version: [10.x, 12.x]

    runs-on: ubuntu-latest
    steps:
      - name: Checkout source code 
        uses: actions/checkout@v2
        
      - name: My First Step
        run:
          npm install
          npm test
          npm build

      - name: Cache yarn dependencies 
        uses: actions/cache@v1
        id: yarn-cache
        with:
          path: node_modules
          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}
          restore-keys: |
            ${{ runner.os }}-yarn-
 ```
jobì— ëŒ€í•œ ì„¤ì •ë“¤ì´ë‹¤. jobì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ì •ë³´ë“¤ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.

- runs-on: í•´ë‹¹ jobì„ ì–´ë–¤ OSì—ì„œ ì‹¤í–‰í•  ê²ƒì¸ì§€ ëª…ì‹œí•œë‹¤.
- steps: jobì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë™ì‘ì˜ ë‚˜ì—´. ê°ê°ì˜ stepì€ ë…ë¦½ì ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°€ì§„ë‹¤.
	- uses: í•´ë‹¹ stepì—ì„œ ì‚¬ìš©í•  ì•¡ì…˜. Github ë§ˆì¼“í”Œë ˆì´ìŠ¤ì— ì˜¬ë¼ì˜¨ actionë“¤ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.{owner}/{repo}@{ref|version} ì˜ í˜•íƒœë¥¼ ì§€ë‹Œë‹¤.
	- name: stepì˜ ì´ë¦„
	- run: jobì— í• ë‹¹ëœ ì»´í“¨íŒ… ìì›ì˜ shellì„ ì´ìš©í•˜ì—¬ ì»¤ë§¨ë“œ ë¼ì¸ì„ ì‹¤í–‰í•œë‹¤. node.js í”„ë¡œì íŠ¸ì˜ ê²½ìš°, ì´ ê³¼ì •ì— npm packageì˜ scriptsë¥¼ êµ¬ë™í•  ìˆ˜ ìˆë‹¤.
- env: í•´ë‹¹ jobì—ì„œ ì‚¬ìš©í•  í™˜ê²½ ë³€ìˆ˜ë¥¼ key/valueì˜ í˜•íƒœë¡œ ì„¤ì •í•œë‹¤.
- strategy: ì—¬ëŸ¬ í™˜ê²½ì—ì„œì˜ í…ŒìŠ¤íŠ¸/ë°°í¬ë¥¼ ìœ„í•´ì„œ ë¹Œë“œ matrixë¥¼ êµ¬ì„±í•œë‹¤. ìœ„ ì½”ë“œì²˜ëŸ¼ ì‚¬ìš©í•˜ë©´ ë‹¤ì–‘í•œ node ë²„ì „ì—ì„œ ê°™ì€ jobì„ ì‹¤í–‰í•  ìˆ˜ë„ ìˆë‹¤.
- with: í•´ë‹¹ actionì— ì˜í•´ ì •ì˜ë˜ëŠ” input íŒŒë¼ë¯¸í„°. key/value í˜ì–´ë¡œ ë˜ì–´ ìˆë‹¤. input íŒŒë¼ë¯¸í„°ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì •ë˜ê³ , 'INPUT_'ì´ë¼ëŠ” prefixê°€ ë¶™ëŠ”ë‹¤.

### Github Action ì¨ë³´ê¸°
Github í™ˆí˜ì´ì§€ì— ë³´ë©´ ê°„ë‹¨í•˜ê²Œ Github Actionì„ êµ¬ì„±í•´ë³¼ ìˆ˜ ìˆëŠ” ì•ˆë‚´ê°€ ìˆë‹¤. [ë ˆí¼ëŸ°ìŠ¤](https://docs.github.com/en/actions/quickstart)
workflowë¥¼ ì¶”ê°€í•˜ê³  Github Actionì˜ ê°„ë‹¨í•œ ê¸°ëŠ¥ë“¤ì„ ì¨ë³¼ ìˆ˜ ìˆëŠ” ê³¼ì •ì´ë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œëŠ” ê¹ƒí—™ ë ˆí¬ì§€í† ë¦¬ê°€ í•„ìš”í•˜ë‹¤.

ì›í•˜ëŠ” ë ˆí¬ì§€í† ë¦¬ì— .github/workflows ë¼ëŠ” ë””ë ‰í† ë¦¬ ì•ˆì— github-actions-demo.yml íŒŒì¼ì„ ìƒì„±í•œë‹¤. í™ˆí˜ì´ì§€ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ yml íŒŒì¼ ë°ëª¨ ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤.
```yml
name: GitHub Actions Demo
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - run: echo "ğŸ This job's status is ${{ job.status }}."
  ```
ìƒˆ ë¸Œëœì¹˜ ìƒì„± í›„ pull request ì‹œì‘í•˜ê¸°ë¥¼ ì„ íƒí•˜ê³ , Propose new fileì„ í´ë¦­í•œë‹¤.

![](https://velog.velcdn.com/images/dnehgus6975/post/c7ce15e0-3d74-4f00-ac2c-9863b1792092/image.png)

ì»¤ë°‹ í›„ **push ì´ë²¤íŠ¸**ê°€ **íŠ¸ë¦¬ê±°**ë˜ë©´ **workflow**ê°€ ì‹¤í–‰ëœë‹¤.
ì‹¤í–‰ë˜ëŠ” **job**ì€ **Action** íƒ­ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ **ë ˆí¬ì§€í† ë¦¬ì˜ Action íƒ­**ì„ í´ë¦­í•œë‹¤.

![](https://velog.velcdn.com/images/dnehgus6975/post/e6e42d4a-8bb3-4879-a332-975d01979ab2/image.png)

ì¢Œì¸¡ì—ì„œ ë³´ê³  ì‹¶ì€ workflowì˜ nameì„ í´ë¦­í•œë‹¤. í…ŒìŠ¤íŠ¸ì˜ ê²½ìš° nameì´ 'Github-Action-Demo'ì˜€ìœ¼ë¯€ë¡œ í´ë¦­!

![](https://velog.velcdn.com/images/dnehgus6975/post/853e238a-09b1-4ae8-b6dd-c1ea978409cc/image.png)


![](https://velog.velcdn.com/images/dnehgus6975/post/b97666fa-f98a-414e-aebd-0106861241c8/image.png)

ë¦¬ìŠ¤íŠ¸ì— ë³´ì´ëŠ” **yml**ì„ í´ë¦­í•˜ë©´ ì¢Œì¸¡ì— ì‹¤í–‰ë˜ëŠ” **job**ì˜ **name**ì´ ëœ¬ë‹¤.

![](https://velog.velcdn.com/images/dnehgus6975/post/ceaaf600-a2a7-497b-931e-aea9eba46da7/image.png)

ë¡œê·¸ë¥¼ ë³´ë©´ ì•„ë˜ì²˜ëŸ¼ ê° stepë“¤ì´ ì–´ë–»ê²Œ ì‹¤í–‰ë˜ëŠ”ì§€ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. expandí•˜ë©´ ë””í…Œì¼í•œ ë‚´ìš©ë„ ë³¼ ìˆ˜ ìˆë‹¤.

![](https://velog.velcdn.com/images/dnehgus6975/post/dcaa33aa-d530-463c-a960-3db0acb716ee/image.png)

