<!DOCTYPE html>
<html lang="ko" class="no-js">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    

    
    

    
    

    
    

    <title>DevOps&#91;Day28-6&#93; / [Docker] | Teddy-woo's DevOps Challenge!</title>
    <meta name="description" content="도커 네트워크 구조">
    
        <meta name="keywords" content="docker, network, docker netork, DevOps BootCamp">
    

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="DevOps&#91;Day28-6&#93; / [Docker] | Teddy-woo's DevOps Challenge!">
    <meta name="twitter:description" content="도커 네트워크 구조">

    
        <meta property="twitter:image" content="http://localhost:4000/docker.png">
    
    
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="http://localhost:4000/day28-6/">
    <meta property="og:title" content="DevOps&#91;Day28-6&#93; / [Docker] | Teddy-woo's DevOps Challenge!">
    <meta property="og:image" content="/docker.png">
    <meta property="og:description" content="도커 네트워크 구조">
    <meta property="og:site_name" content="도현's Blog | 도현's 데브옵스 도전기!">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="Teddy-woo's DevOps Challenge!">
    <meta name="msapplication-TileColor" content="#141414">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="#141414">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="canonical" href="http://localhost:4000/day28-6/">
    <link rel="alternate" type="application/rss+xml" title="도현's Blog | 도현's 데브옵스 도전기!" href="http://localhost:4000/feed.xml" />

    <!-- Include extra styles -->
    

    <!-- JavaScript enabled/disabled -->
    <script>
        document.querySelector('html').classList.remove('no-js');
    </script>
</head>

    <body class="has-push-menu">
        





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 1000 1000"><path d="M969.8,870.3c27,27.7,27,71.8,0,99.1C955.7,983,937.9,990,920,990c-17.9,0-35.7-7-49.7-20.7L500,599L129.6,969.4C115.6,983,97.8,990,79.9,990s-35.7-7-49.7-20.7c-27-27.3-27-71.4,0-99.1L400.9,500L30.3,129.3c-27-27.3-27-71.4,0-99.1c27.3-27,71.8-27,99.4,0L500,400.9L870.4,30.2c27.7-27,71.8-27,99.4,0c27,27.7,27,71.8,0,99.1L599.1,500L969.8,870.3z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-clock" viewBox="0 0 1000 1000"><path d="M500,10C229.8,10,10,229.8,10,500c0,270.2,219.8,490,490,490c270.2,0,490-219.8,490-490C990,229.8,770.2,10,500,10z M500,910.2c-226.2,0-410.2-184-410.2-410.2c0-226.2,184-410.2,410.2-410.2c226.2,0,410.2,184,410.2,410.2C910.2,726.1,726.2,910.2,500,910.2z M753.1,374c8.2,11.9,5.2,28.1-6.6,36.3L509.9,573.7c-4.4,3.1-9.6,4.6-14.8,4.6c-4.1,0-8.3-1-12.1-3c-8.6-4.5-14-13.4-14-23.1V202.5c0-14.4,11.7-26.1,26.1-26.1c14.4,0,26.1,11.7,26.1,26.1v300l195.6-135.1C728.7,359.2,744.9,362.1,753.1,374z"/></symbol><symbol id="icon-calendar" viewBox="0 0 1000 1000"><path d="M920,500v420H80V500H920 M990,430H10v490c0,38.7,31.3,70,70,70h840c38.7,0,70-31.3,70-70V430L990,430z"/><path d="M850,80v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80H360v105c0,57.9-47.2,105-105,105c-58,0-105-47.1-105-105V80C72.8,80,10,142.7,10,220v140h980V220C990,142.7,927.2,80,850,80z"/><path d="M255,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C290,25.8,274.3,10,255,10z"/><path d="M745,10c-19.3,0-35,15.8-35,35v140c0,19.2,15.7,35,35,35c19.3,0,35-15.8,35-35V45C780,25.8,764.3,10,745,10z"/></symbol><symbol id="icon-github" viewBox="0 0 12 14"><path d="M6 1q1.633 0 3.012 0.805t2.184 2.184 0.805 3.012q0 1.961-1.145 3.527t-2.957 2.168q-0.211 0.039-0.312-0.055t-0.102-0.234q0-0.023 0.004-0.598t0.004-1.051q0-0.758-0.406-1.109 0.445-0.047 0.801-0.141t0.734-0.305 0.633-0.52 0.414-0.82 0.16-1.176q0-0.93-0.617-1.609 0.289-0.711-0.062-1.594-0.219-0.070-0.633 0.086t-0.719 0.344l-0.297 0.187q-0.727-0.203-1.5-0.203t-1.5 0.203q-0.125-0.086-0.332-0.211t-0.652-0.301-0.664-0.105q-0.352 0.883-0.062 1.594-0.617 0.68-0.617 1.609 0 0.664 0.16 1.172t0.41 0.82 0.629 0.523 0.734 0.305 0.801 0.141q-0.305 0.281-0.383 0.805-0.164 0.078-0.352 0.117t-0.445 0.039-0.512-0.168-0.434-0.488q-0.148-0.25-0.379-0.406t-0.387-0.187l-0.156-0.023q-0.164 0-0.227 0.035t-0.039 0.090 0.070 0.109 0.102 0.094l0.055 0.039q0.172 0.078 0.34 0.297t0.246 0.398l0.078 0.18q0.102 0.297 0.344 0.48t0.523 0.234 0.543 0.055 0.434-0.027l0.18-0.031q0 0.297 0.004 0.691t0.004 0.426q0 0.141-0.102 0.234t-0.312 0.055q-1.812-0.602-2.957-2.168t-1.145-3.527q0-1.633 0.805-3.012t2.184-2.184 3.012-0.805zM2.273 9.617q0.023-0.055-0.055-0.094-0.078-0.023-0.102 0.016-0.023 0.055 0.055 0.094 0.070 0.047 0.102-0.016zM2.516 9.883q0.055-0.039-0.016-0.125-0.078-0.070-0.125-0.023-0.055 0.039 0.016 0.125 0.078 0.078 0.125 0.023zM2.75 10.234q0.070-0.055 0-0.148-0.062-0.102-0.133-0.047-0.070 0.039 0 0.141t0.133 0.055zM3.078 10.562q0.062-0.062-0.031-0.148-0.094-0.094-0.156-0.023-0.070 0.062 0.031 0.148 0.094 0.094 0.156 0.023zM3.523 10.758q0.023-0.086-0.102-0.125-0.117-0.031-0.148 0.055t0.102 0.117q0.117 0.047 0.148-0.047zM4.016 10.797q0-0.102-0.133-0.086-0.125 0-0.125 0.086 0 0.102 0.133 0.086 0.125 0 0.125-0.086zM4.469 10.719q-0.016-0.086-0.141-0.070-0.125 0.023-0.109 0.117t0.141 0.062 0.109-0.109z"></path></symbol><symbol id="icon-medium" viewBox="0 0 1000 1000"><path d="M336.5,240.2v641.5c0,9.1-2.3,16.9-6.8,23.2s-11.2,9.6-20,9.6c-6.2,0-12.2-1.5-18-4.4L37.3,782.7c-7.7-3.6-14.1-9.8-19.4-18.3S10,747.4,10,739V115.5c0-7.3,1.8-13.5,5.5-18.6c3.6-5.1,8.9-7.7,15.9-7.7c5.1,0,13.1,2.7,24.1,8.2l279.5,140C335.9,238.6,336.5,239.5,336.5,240.2L336.5,240.2z M371.5,295.5l292,473.6l-292-145.5V295.5z M990,305.3v576.4c0,9.1-2.6,16.5-7.7,22.1c-5.1,5.7-12,8.5-20.8,8.5s-17.3-2.4-25.7-7.1L694.7,784.9L990,305.3z M988.4,239.7c0,1.1-46.8,77.6-140.3,229.4C754.6,621,699.8,709.8,683.8,735.7L470.5,389l177.2-288.2c6.2-10.2,15.7-15.3,28.4-15.3c5.1,0,9.8,1.1,14.2,3.3l295.9,147.7C987.6,237.1,988.4,238.2,988.4,239.7L988.4,239.7z"/></symbol><symbol id="icon-instagram" viewBox="0 0 489.84 489.84"><path d="M249.62,50.46c65.4,0,73.14.25,99,1.43C372.47,53,385.44,57,394.07,60.32a75.88,75.88,0,0,1,28.16,18.32,75.88,75.88,0,0,1,18.32,28.16c3.35,8.63,7.34,21.6,8.43,45.48,1.18,25.83,1.43,33.57,1.43,99s-0.25,73.14-1.43,99c-1.09,23.88-5.08,36.85-8.43,45.48a81.11,81.11,0,0,1-46.48,46.48c-8.63,3.35-21.6,7.34-45.48,8.43-25.82,1.18-33.57,1.43-99,1.43s-73.15-.25-99-1.43c-23.88-1.09-36.85-5.08-45.48-8.43A75.88,75.88,0,0,1,77,423.86,75.88,75.88,0,0,1,58.69,395.7c-3.35-8.63-7.34-21.6-8.43-45.48-1.18-25.83-1.43-33.57-1.43-99s0.25-73.14,1.43-99c1.09-23.88,5.08-36.85,8.43-45.48A75.88,75.88,0,0,1,77,78.64a75.88,75.88,0,0,1,28.16-18.32c8.63-3.35,21.6-7.34,45.48-8.43,25.83-1.18,33.57-1.43,99-1.43m0-44.13c-66.52,0-74.86.28-101,1.47s-43.87,5.33-59.45,11.38A120.06,120.06,0,0,0,45.81,47.44,120.06,120.06,0,0,0,17.56,90.82C11.5,106.4,7.36,124.2,6.17,150.27s-1.47,34.46-1.47,101,0.28,74.86,1.47,101,5.33,43.87,11.38,59.45a120.06,120.06,0,0,0,28.25,43.38,120.06,120.06,0,0,0,43.38,28.25c15.58,6.05,33.38,10.19,59.45,11.38s34.46,1.47,101,1.47,74.86-.28,101-1.47,43.87-5.33,59.45-11.38a125.24,125.24,0,0,0,71.63-71.63c6.05-15.58,10.19-33.38,11.38-59.45s1.47-34.46,1.47-101-0.28-74.86-1.47-101-5.33-43.87-11.38-59.45a120.06,120.06,0,0,0-28.25-43.38,120.06,120.06,0,0,0-43.38-28.25C394.47,13.13,376.67,9,350.6,7.8s-34.46-1.47-101-1.47h0Z" transform="translate(-4.7 -6.33)" /><path d="M249.62,125.48A125.77,125.77,0,1,0,375.39,251.25,125.77,125.77,0,0,0,249.62,125.48Zm0,207.41a81.64,81.64,0,1,1,81.64-81.64A81.64,81.64,0,0,1,249.62,332.89Z" transform="translate(-4.7 -6.33)"/><circle cx="375.66" cy="114.18" r="29.39" /></symbol><symbol id="icon-linkedin" viewBox="0 0 12 14"><path d="M2.727 4.883v7.742h-2.578v-7.742h2.578zM2.891 2.492q0.008 0.57-0.395 0.953t-1.059 0.383h-0.016q-0.641 0-1.031-0.383t-0.391-0.953q0-0.578 0.402-0.957t1.051-0.379 1.039 0.379 0.398 0.957zM12 8.187v4.437h-2.57v-4.141q0-0.82-0.316-1.285t-0.988-0.465q-0.492 0-0.824 0.27t-0.496 0.668q-0.086 0.234-0.086 0.633v4.32h-2.57q0.016-3.117 0.016-5.055t-0.008-2.313l-0.008-0.375h2.57v1.125h-0.016q0.156-0.25 0.32-0.438t0.441-0.406 0.68-0.34 0.895-0.121q1.336 0 2.148 0.887t0.813 2.598z"></path></symbol><symbol id="icon-heart" viewBox="0 0 34 30"><path d="M17,29.7 L16.4,29.2 C3.5,18.7 0,15 0,9 C0,4 4,0 9,0 C13.1,0 15.4,2.3 17,4.1 C18.6,2.3 20.9,0 25,0 C30,0 34,4 34,9 C34,15 30.5,18.7 17.6,29.2 L17,29.7 Z M9,2 C5.1,2 2,5.1 2,9 C2,14.1 5.2,17.5 17,27.1 C28.8,17.5 32,14.1 32,9 C32,5.1 28.9,2 25,2 C21.5,2 19.6,4.1 18.1,5.8 L17,7.1 L15.9,5.8 C14.4,4.1 12.5,2 9,2 Z" id="Shape"></path></symbol><symbol id="icon-arrow-right" viewBox="0 0 25.452 25.452"><path d="M4.471,24.929v-2.004l12.409-9.788c0.122-0.101,0.195-0.251,0.195-0.411c0-0.156-0.073-0.31-0.195-0.409L4.471,2.526V0.522c0-0.2,0.115-0.384,0.293-0.469c0.18-0.087,0.396-0.066,0.552,0.061l15.47,12.202c0.123,0.1,0.195,0.253,0.195,0.409c0,0.16-0.072,0.311-0.195,0.411L5.316,25.34c-0.155,0.125-0.372,0.147-0.552,0.061C4.586,25.315,4.471,25.13,4.471,24.929z"/></symbol><symbol id="icon-star" viewBox="0 0 48 48"><path fill="currentColor" d="M44,24c0,11.045-8.955,20-20,20S4,35.045,4,24S12.955,4,24,4S44,12.955,44,24z"/><path fill="#ffffff" d="M24,11l3.898,7.898l8.703,1.301l-6.301,6.102l1.5,8.699L24,30.898L16.199,35l1.5-8.699l-6.301-6.102  l8.703-1.301L24,11z"/></symbol><symbol id="icon-read" viewBox="0 0 32 32"><path fill="currentColor" d="M29,4H3C1.343,4,0,5.343,0,7v18c0,1.657,1.343,3,3,3h10c0,0.552,0.448,1,1,1h4c0.552,0,1-0.448,1-1h10  c1.657,0,3-1.343,3-3V7C32,5.343,30.657,4,29,4z M29,5v20H18.708c-0.618,0-1.236,0.146-1.789,0.422l-0.419,0.21V5H29z M15.5,5  v20.632l-0.419-0.21C14.528,25.146,13.91,25,13.292,25H3V5H15.5z M31,25c0,1.103-0.897,2-2,2H18v1h-4v-1H3c-1.103,0-2-0.897-2-2V7  c0-0.737,0.405-1.375,1-1.722V25c0,0.552,0.448,1,1,1h10.292c0.466,0,0.925,0.108,1.342,0.317l0.919,0.46  c0.141,0.07,0.294,0.106,0.447,0.106c0.153,0,0.306-0.035,0.447-0.106l0.919-0.46C17.783,26.108,18.242,26,18.708,26H29  c0.552,0,1-0.448,1-1V5.278C30.595,5.625,31,6.263,31,7V25z M6,12.5C6,12.224,6.224,12,6.5,12h5c0.276,0,0.5,0.224,0.5,0.5  S11.776,13,11.5,13h-5C6.224,13,6,12.776,6,12.5z M6,14.5C6,14.224,6.224,14,6.5,14h5c0.276,0,0.5,0.224,0.5,0.5S11.776,15,11.5,15  h-5C6.224,15,6,14.776,6,14.5z M6,16.5C6,16.224,6.224,16,6.5,16h5c0.276,0,0.5,0.224,0.5,0.5S11.776,17,11.5,17h-5  C6.224,17,6,16.776,6,16.5z M20,12.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,13,25.5,13h-5  C20.224,13,20,12.776,20,12.5z M20,14.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,15,25.5,15h-5  C20.224,15,20,14.776,20,14.5z M20,16.5c0-0.276,0.224-0.5,0.5-0.5h5c0.276,0,0.5,0.224,0.5,0.5S25.776,17,25.5,17h-5  C20.224,17,20,16.776,20,16.5z"></path></symbol></defs></svg>

        <header class="bar-header">
    <a id="menu" role="button">
        <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    </a>
    <h1 class="logo">
        <a href="/">
            
                Teddy-woo's DevOps Challenge! <span class="version">v3.1.2</span>
            
        </a>
    </h1>
    <a id="search" class="dosearch" role="button">
        <svg class="icon-search"><use xlink:href="#icon-search"></use></svg>
    </a>
</header>

<div id="mask" class="overlay"></div>

<aside class="sidebar" id="sidebar">
  <nav id="navigation">
    <h2 style="position:sticky; top:0; background-color:#fff;">Menu</h2>
    <div style="height: 900px; overflow: auto;">
      <ul>
  
    
      <li>
        <a href="http://localhost:4000/">Home</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/개발%20프로세스와%20DEVOPS%20업무/">1. 개발 프로세스와 DEVOPS 업무</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/리눅스%20운영체제">2. 리눅스 운영체제</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/웹서비스%20개발%20기초/">3. 웹서비스 개발 기초</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/GIT과%20버전%20관리%20시스템/">4. GIT과 버전 관리 시스템</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/(사전준비)%20개발%20환경%20구축/">5. (사전준비) 개발 환경 구축</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/HTTP/">6. HTTP</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/WAS와%20WEB%20SERVER/">7. WAS와 WEB SERVER</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/데이터베이스/">8. 데이터베이스</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/프로젝트%20회고/">9. 프로젝트 회고</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/네트워크%20기초/">10. 네트워크 기초</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/웹%20서버%20프로그램/">11. 웹 서버 프로그램</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/YAML과%20JSON/">12. YAML과 JSON</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/트러블%20슈팅/">13. 트러블 슈팅</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/아마존%20웹%20서비스(AWS)/">14. 아마존 웹 서비스(AWS)</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/Docker/">15. DOCKER(도커)</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/지속적%20통합/">16. 지속적 통합</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/배포%20자동화/">17. 배포 자동화</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/feed.xml/">feed</a>
      </li>
    
  
</ul>

    </div>
  </nav>
</aside>
<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>



        <section class="post two-columns">
            <article role="article" class="post-content">
                <p class="post-info">
                    
                        <svg class="icon-calendar" id="date"><use xlink:href="#icon-calendar"></use></svg>
                        <time class="date" datetime="2023-04-13T09:00:00+09:00">
                            


April 13, 2023

                        </time>
                    
                    <svg id="clock" class="icon-clock"><use xlink:href="#icon-clock"></use></svg>
                    <span>5 min to read</span>
                </p>
                <h1 class="post-title">DevOps&#91;Day28-6&#93; / [Docker]</h1>
                <p class="post-subtitle">도커 네트워크 구조</p>

                
                    <img src="/docker.png" alt="Featured image" class="post-cover">
                

                <!-- Pagination links -->



                <!-- Add your table of contents here -->


                <h2 id="도커-네트워크-구조">도커 네트워크 구조</h2>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/8f034405-c3e5-45e4-a004-99672daac3ed/image.png" alt="" /></p>

<p>기본적으로 도커를 호스트 운영체제에 설치하면 여러가지 네트워크 드라이버들이 설치되며 IP 주소를 순차적으로 할당하고 도커 컨테이너를 실행할 때 사용하고 싶은 네트워크 드라이버를 선택할 수 있습니다.</p>

<p>기본적으로 도커는 컨테이너에 172.17.0.x의 IP를 순차적으로 할당합니다. 확인해보기 위해 아래의 명령어로 컨테이너를 생성해줍니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -it ubuntu:focal
</code></pre></div></div>
<p>그리고 컨테이너 내부에서 ifconfig 명령어로 컨테이너의 네트워크 인터페이스를 확인합니다.</p>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/aa7b8596-92a5-40f3-9d9e-f39ceba376df/image.png" alt="" /></p>

<p>위 스크린샷을 보면 lo 네트워크 인터페이스와 eth0 네트워크 인터페이스가 각각 172.17.0.1과 172.17.0.2가 할당된 것을 확인할 수 있습니다. 이 IP들은 내부 IP로 아무런 설정을 하지 않았다면 이 컨테이너는 외부에서 접근할 수 없으며 <strong>도커가 설치된 호스트 내부에서만 접근</strong>할 수 있습니다.</p>

<p>외부에 컨테이너 어플케이션을 노출하기 위해서는 eth0의 IP포트를 호스트의 <strong>IP와 포트에 바인딩</strong>해야 합니다.</p>

<p>외부와의 네트워크 연결은 컨테이너마다 eth0에 대응되는 veth라는 가상 네트워크 인터페이스를 호스트에 생성함으로써 이루어집니다. 그리고 각각의 IP 주소와 포트를 입력해 컨테이너를 외부에 노출 시킬 수 있습니다. veth는 도커 호스트에서 ifconfig 명령어를 입력하면 확인 가능합니다.</p>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/0ef3fbd9-c261-4a9c-9b7b-ab0f322bb05a/image.png" alt="" /></p>

<p>즉, eth0에 대응되는 vethXXXX이라는 이름의 veth interface와 브릿지 네트워크에 컨테이너의 interface가 바인딩되는 형태로 통신합니다.</p>

<p>veth 인터페이스는 사용자가 직접 생성할 필요는 없고 컨테이너가 생성될 때 도커 엔진이 자동으로 생성합니다. 도커 컨테이너가 실행될 때 네트워크 드라이버를 따로 지정하지 않으면 <strong>docker0라고 하는 브릿지 네트워크를 default</strong>로 사용합니다. 이 브릿지 네트워크의 역할은 veth와 호스트의 eth0의 다리 역할을 합니다.</p>

<h3 id="veth란">veth란?</h3>
<p>리눅스의 <strong>virtual ethernet interface, virtual eth</strong>를 의미. 랜카드에 연결된 실제 네트워크 인터페이스가 아니라 가상으로 생성한 네트워크 인터페이스 입니다. 일반적인 네트워크 인터페이스와는 달리 패킷을 전달받으면, 자신에게 연결된 다른 네트워크 인터페이스로 패킷을 보내주는 식으로 동작하기 때문에 항상 쌍(pair)로 생성해줘야 합니다. 한 쪽에서 다른 쪽으로 패킷을 전송할 수 있으며, 한 쪽이 다운된 경우 나머지 한 쪽도 정상적으로 기능하지 않는 것이 특징입니다. 도커에서는 실행중인 컨테이너 수 만큼 veth로 시작하는 인터페이스가 생성됩니다.</p>

<h2 id="도커-컨테이너-port를-외부에-노출">도커 컨테이너 Port를 외부에 노출</h2>
<h3 id="컨테이너-포트-연결-명령어">컨테이너 포트 연결 명령어</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -p [HOST IP:PORT]:[CONTAINER PORT] [CONTAINER NAME]
</code></pre></div></div>
<p><strong>-p:</strong> publish 옵션. 호스트 ip 포트를 Container Port와 매핑시키는 역할을 합니다.</p>

<p>아래의 예제들로 포트연결을 해보겠습니다.</p>

<h4 id="예제1-nginx-컨테이너의-80번-포트를-호스트의-모든-ip의-80번-포트와-연결하여-실행">예제1. nginx 컨테이너의 80번 포트를 호스트의 모든 IP의 80번 포트와 연결하여 실행</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -d -p 80:80 nginx
</code></pre></div></div>
<p>위의 명령어는 호스트의 80번 포트와 컨테이너의 80번 포트를 연결합니다.</p>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/dfa0991f-0929-4430-98ed-8e321806e830/image.png" alt="" /></p>

<p>실행결과
0.0.0.0:80 -&gt; 80/tcp -&gt; 위의 실행결과에서 Port를 해석하면 <strong>모든 호스트 IP의 80번 포트는 컨테이너의 80번 포트</strong>로 매핑이 된다는 것을 의미합니다.</p>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/28d314b6-1dac-4ca7-ab33-bb4728c8b677/image.png" alt="" /></p>

<p>curl로 호스트의 80번 포트를 접근해보면 nginx가 출력되는 것을 확인할 수 있습니다.</p>

<h4 id="예제2-nginx-컨테이너의-80번-포트를-호스트의-사용-가능한-포트와-연결하여-실행">예제2. nginx 컨테이너의 80번 포트를 호스트의 사용 가능한 포트와 연결하여 실행</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -d -p 80 nginx
</code></pre></div></div>
<p>위의 명령어처럼 80번 포트 하나만 지정을 하면 컨테이너 포트만 지정하는 역할을 합니다.</p>

<p>이렇게 되면, 컨테이너 80번 포트를 호스트의 사용가능한 포트를 랜덤으로 지정하여 연결하게 됩니다.</p>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/88b763bf-e3e0-4798-b5a9-728490902514/image.png" alt="" /></p>

<p>docker ps로 확인해본 결과 컨테이너의 80번 포트를 호스트의 49153포트로 자동으로 연결이 되었습니다.</p>

<p>마찬가지로 curl localhost:49153로 접근을하면 정상적으로 동작하고 curl localhost:80는 동작하지 않습니다.</p>

<h4 id="예제3-nginx-컨테이너의-80번-포트를-호스트의-127001-ip의-80번-포트와-연결하여-실행">예제3. nginx 컨테이너의 80번 포트를 호스트의 127.0.0.1 IP의 80번 포트와 연결하여 실행</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -d -p 127.0.0.1:80:80 nginx
</code></pre></div></div>
<p>위처럼 컨테이너의 IP까지 지정을 해주면 호스트의 해당 IP에 대해서만 포트(여기선 80번 포트)를 매핑하게 됩니다.</p>

<h2 id="도커-네트워크-드라이버">도커 네트워크 드라이버</h2>
<h3 id="도커-네트워크-종류">도커 네트워크 종류</h3>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/3441b857-3560-4414-81da-781262436024/image.png" alt="" /></p>

<p>도커 네트워크 드라이버는 Native 드라이버와 Remote 드라이버로 나뉩니다.</p>

<p><strong>Native Drivers</strong> -&gt; Bridge, Host, None, Overlay를 사용.</p>

<p><strong>Remote Drivers</strong> -&gt; 써드파티 드라이버로 외부에서 잘 만들어진 드라이버를 사용.</p>

<h3 id="네트워크-동작-방식에-따라-드라이버-분류">네트워크 동작 방식에 따라 드라이버 분류</h3>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/dc5ce23a-501e-4c63-b749-11fb2ec0e852/image.png" alt="" /></p>

<p>위 그림은 네트워크 드라이버를 단일 호스트, 다중 호스트로 분류를 한 그림입니다.</p>

<p>네트워크 드라이버는 단일 호스트에서 동작하는 네트워킹, 단일 호스트에서 동작하는 네트워킹이 있습니다.</p>

<p><strong>단일 호스트 네트워크 드라이버</strong> -&gt; Bridge, Host, None 네트워크</p>

<p><strong>다중 호스트 네트워크 드라이버</strong> -&gt; Overlay 네트워크</p>

<h3 id="도커-네트워크-목록-확인">도커 네트워크 목록 확인</h3>
<p>도커 네트워크 목록은 docker netork ls 명령어로 확인 가능합니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker network ls
</code></pre></div></div>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/ed0813f7-4398-42fe-a8d2-1d2813e62b75/image.png" alt="" /></p>

<h3 id="도커-네트워크-확인하기">도커 네트워크 확인하기</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker network insepct [NETWORK ID or NAME]
</code></pre></div></div>
<p>도커 네트워크는 docker network inspect 명령어로 확인이 가능합니다.</p>

<h3 id="도커-네트워크-생성하기">도커 네트워크 생성하기</h3>
<p>도커 네트워크는 docker network create 명령어로 생성할 수 있고, –driver 옵션으로 네트워크 드라이버를 지정할 수 있습니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ex. docker network create --driver=bridge seunghwan-bridge
$ docker network create --driver=[NETWORK DRIVER] [DRIVER NAME]
</code></pre></div></div>
<h3 id="네트워크-지정-후-컨테이너-실행">네트워크 지정 후 컨테이너 실행</h3>
<p>도커 네트워크는 docker run 명령어에 –network 옵션으로 네트워크를 지정할 수 있습니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -d --network=[NETWORK DRIVER] [CONTAINER NAME]
</code></pre></div></div>
<h3 id="bridge-네트워크">Bridge 네트워크</h3>
<p>포트를 연결해 Port를 외부에 노출하는 방식이 이 <strong>bridge 네트워크</strong>를 이용하는 방식입니다.</p>

<p>위에 있는 예제에서도 네트워크 드라이버를 지정해주지 않았으므로 default로 docker0라는 bridge 네트워크를 사용하고 있습니다.</p>

<p>그리고, 커스텀 bridge 네트워크를 생성해서 사용할 수도 있습니다.</p>

<p>bridge 네트워크를 확인해보면 <strong>docker0 브릿지</strong> 네트워크인 것을 확인할 수 있습니다.</p>

<p>IP 172.17.0.0을 사용하는 것을 확인할 수 있고 컨테이너를 네트워크 드라이버를 지정하지 않고 생성하면 해당 docker0 브릿지 네트워크를 사용합니다.</p>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/c20130d0-ffcc-4b91-9e1f-d622c14af184/image.png" alt="" /></p>

<h3 id="host-네트워크">Host 네트워크</h3>
<p>host 네트워크는 도커가 제공해주는 가상 네트워크(veth)를 사용하는 것이 아니라 직접 host 네트워크에 붙어서 사용하는 개념입니다.</p>

<p>그래서 host 네트워크를 사용할 경우에는 Port 바인딩을 하지 않더라도 host 네트워크를 사용하기 때문에 접속을 할수있게 됩니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -d --network=host nginx
</code></pre></div></div>
<p>위 명령어로 호스트 네트워크 드라이버로 nginx를 실행시키면 포트 목록이 보이지 않는 것을 확인할 수 있습니다.</p>

<p><img src="https://velog.velcdn.com/images/arnold_99/post/12c6771c-9adb-40b3-818a-ad5434b0a803/image.png" alt="" /></p>

<h3 id="none-네트워크">None 네트워크</h3>
<p>none 네트워크 드라이버는 해당 컨테이너가 네트워크 기능이 필요없을 때, 혹은 커스텀 네트워킹을 사용해야되는 경우가 있을 때 드라이버를 none으로 설정하고 사용할 수 있습니다.</p>

<p>none 네트워크를 사용해서 컨테이너를 생성하면 외부와의 연결이 단절됩니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run --network none ubuntu:focal
</code></pre></div></div>
<h3 id="container-네트워크">container 네트워크</h3>
<p>다른 컨테이너의 네트워크 네임스페이스 환경을 공유할 수 있습니다. 공유되는 속성은 내부 IP, MAC주소입니다.</p>

<p>컨테이너 2개를 생성해주는데 network_container_2가 network_container_1의 네트워크 환경을 공유하도록 설정해줍니다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run -it -d -- name network_container_1 ubuntu:18.04
$ docker run -it -d --name network_container_2 --net container:network_container_1 ubuntu:18.04
</code></pre></div></div>
<h3 id="사용자-정의-네트워크">사용자 정의 네트워크</h3>
<p>내부 DNS 서버에 의해 이름 해결이 이루어진다.
내부 DNS 서버를 사용하면, link 기능과 같이 /etc/hosts/ 파일에 의존하지 않고 이름을 해결 할 수있다.
docker0에 연결된 컨테이너들은 ping을 할 때 IP만 가능하지만, 사용자 정의 네트워크에 연결된 컨테이너들은 컨테이너명뿐만 아니라 컨테이너 시작 시 지정한 –net-alias 옵션을 사용한 에일리어스 명칭으로도 통신이 가능하다.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 컨테이너 구동 시킬 때 결합

docker run --network customNetwork --name container1 containerImage:1

# 컨테이너 구동 후 결합
docker network connect our-net one
</code></pre></div></div>


                <!-- Pagination links -->


            </article>

            
                <aside class="see-also">
                    <h2>See also</h2>
                    <ul>
                        
                        
                        
                            <li>
                                <a href="/day29-1/">
                                    
                                        <img src="/aws.png">
                                    
                                    <h3>DevOps&#91;Day29-1&#93; / [아마존 웹 서비스(AWS)]</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/day28-3/">
                                    
                                        <img src="/docker.png">
                                    
                                    <h3>DevOps&#91;Day28-3&#93; / [Docker]</h3>
                                </a>
                            </li>
                        
                            <li>
                                <a href="/day10-1/">
                                    
                                        <img src="/git.png">
                                    
                                    <h3>DevOps&#91;Day10-1&#93; / [Git과 버전 관리 시스템]</h3>
                                </a>
                            </li>
                        
                    </ul>
                </aside>
            

        </section>

        <!-- Add time bar only for pages without pagination -->
        
            <div class="time-bar" data-minutes="5">
    <span class="time-completed"></span>
    <span class="time-remaining"></span>
    <div class="bar">
        <span class="completed" style="width:0%;"></span>
        <span class="remaining" style="width:100%;"></span>
    </div>
</div>

            <div class="recommendation">
    <div class="message">
        <strong>Why don't you read something next?</strong>
        <div>
            <button>
                <svg><use xlink:href="#icon-arrow-right"></use></svg>
                <span>Go back to top</span>
            </button>
        </div>
    </div>
    
    <a href="/day28-7/" class="post-preview">
        <div class="image">
            
                <img src="/docker.png">
            
        </div>
        <h3 class="title">DevOps&#91;Day28-7&#93; / [Docker]</h3>
    </a>
</div>

        

        <!-- Show modal if the post is the last one -->
        

        <!-- Show modal before user leaves the page -->
        

        <!-- Add your newsletter subscription form here -->

        <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;도커 네트워크 구조&quot;%20http://localhost:4000/day28-6/%20via%20&#64;&hashtags=docker,network,docker netork,DevOps BootCamp"
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/day28-6/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
</section>

        


        

<section class="comments">
    <h3>Comments</h3>
    <div id="disqus_thread"></div>
</section>
<script type="text/javascript">
    var disqus_loaded = false;

    function load_disqus()
    {
        disqus_loaded = true;
        var disqus_shortname = 'teddynote';
        var disqus_title = '';
        var disqus_url = '/day28-6/';
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        var ldr = document.getElementById('disqus_loader');
    };
    window.onscroll = function(e) {
        if ((window.innerHeight + window.scrollY) >= (document.body.offsetHeight - 800)) {
            //hit bottom of page
            if (disqus_loaded==false)
                load_disqus()
        }
    };
</script>



        <footer>
    <p>
      
        <a href="https://github.com/teddy-woo" title="Github">
          <svg><use xlink:href="#icon-github"></use></svg>
        </a>
      
      
      
      
      
      
    </p>

    <ul>
  
    
      <li>
        <a href="http://localhost:4000/">Home</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/개발%20프로세스와%20DEVOPS%20업무/">1. 개발 프로세스와 DEVOPS 업무</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/리눅스%20운영체제">2. 리눅스 운영체제</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/웹서비스%20개발%20기초/">3. 웹서비스 개발 기초</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/GIT과%20버전%20관리%20시스템/">4. GIT과 버전 관리 시스템</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/(사전준비)%20개발%20환경%20구축/">5. (사전준비) 개발 환경 구축</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/HTTP/">6. HTTP</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/WAS와%20WEB%20SERVER/">7. WAS와 WEB SERVER</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/데이터베이스/">8. 데이터베이스</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/프로젝트%20회고/">9. 프로젝트 회고</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/네트워크%20기초/">10. 네트워크 기초</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/웹%20서버%20프로그램/">11. 웹 서버 프로그램</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/YAML과%20JSON/">12. YAML과 JSON</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/트러블%20슈팅/">13. 트러블 슈팅</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/아마존%20웹%20서비스(AWS)/">14. 아마존 웹 서비스(AWS)</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/Docker/">15. DOCKER(도커)</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/지속적%20통합/">16. 지속적 통합</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/배포%20자동화/">17. 배포 자동화</a>
      </li>
    
  
    
      <li>
        <a href="http://localhost:4000/category/feed.xml/">feed</a>
      </li>
    
  
</ul>


    <p>
      <span>Jekflix</span> was made with <svg class="love"><use xlink:href="#icon-heart"></use></svg> by <a href="https://rossener.com" target="_blank" class="creator">Thiago Rossener</a>
    </p>
</footer>









<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "Teddy-woo's DevOps Challenge!",
  "description": "도현's 데브옵스 도전기! is made by Teddy-woo.",
  "url": "http://localhost:4000/",
  "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:4000/assets/img/icons/mediumtile.png",
      "width": "600",
      "height": "315"
  },
  "sameAs": [
    "https://github.com/teddy-woo"
  ]
}
</script>

<!-- Include the script that allows Netlify CMS login -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

<!-- Include the website scripts -->
<script src="/assets/js/scripts.min.js"></script>

<!-- Include Google Analytics script -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YQQ2NQ44TG"></script>
<script>
  var host = window.location.hostname;
  if (host != 'localhost') {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-YQQ2NQ44TG');
  }
</script>
  


<!-- Include extra scripts -->



        

        
        
        
        
        
        
        
        
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BlogPosting",
            "name": "DevOps&#91;Day28-6&#93; / [Docker]",
            "headline": "도커 네트워크 구조",
            "description": "도커 네트워크 구조",
            "image": "/docker.png",
            "url": "http://localhost:4000/day28-6/",
            "articleBody": "도커 네트워크 구조



기본적으로 도커를 호스트 운영체제에 설치하면 여러가지 네트워크 드라이버들이 설치되며 IP 주소를 순차적으로 할당하고 도커 컨테이너를 실행할 때 사용하고 싶은 네트워크 드라이버를 선택할 수 있습니다.

기본적으로 도커는 컨테이너에 172.17.0.x의 IP를 순차적으로 할당합니다. 확인해보기 위해 아래의 명령어로 컨테이너를 생성해줍니다.
docker run -it ubuntu:focal

그리고 컨테이너 내부에서 ifconfig 명령어로 컨테이너의 네트워크 인터페이스를 확인합니다.



위 스크린샷을 보면 lo 네트워크 인터페이스와 eth0 네트워크 인터페이스가 각각 172.17.0.1과 172.17.0.2가 할당된 것을 확인할 수 있습니다. 이 IP들은 내부 IP로 아무런 설정을 하지 않았다면 이 컨테이너는 외부에서 접근할 수 없으며 도커가 설치된 호스트 내부에서만 접근할 수 있습니다.

외부에 컨테이너 어플케이션을 노출하기 위해서는 eth0의 IP포트를 호스트의 IP와 포트에 바인딩해야 합니다.

외부와의 네트워크 연결은 컨테이너마다 eth0에 대응되는 veth라는 가상 네트워크 인터페이스를 호스트에 생성함으로써 이루어집니다. 그리고 각각의 IP 주소와 포트를 입력해 컨테이너를 외부에 노출 시킬 수 있습니다. veth는 도커 호스트에서 ifconfig 명령어를 입력하면 확인 가능합니다.



즉, eth0에 대응되는 vethXXXX이라는 이름의 veth interface와 브릿지 네트워크에 컨테이너의 interface가 바인딩되는 형태로 통신합니다.

veth 인터페이스는 사용자가 직접 생성할 필요는 없고 컨테이너가 생성될 때 도커 엔진이 자동으로 생성합니다. 도커 컨테이너가 실행될 때 네트워크 드라이버를 따로 지정하지 않으면 docker0라고 하는 브릿지 네트워크를 default로 사용합니다. 이 브릿지 네트워크의 역할은 veth와 호스트의 eth0의 다리 역할을 합니다.

veth란?
리눅스의 virtual ethernet interface, virtual eth를 의미. 랜카드에 연결된 실제 네트워크 인터페이스가 아니라 가상으로 생성한 네트워크 인터페이스 입니다. 일반적인 네트워크 인터페이스와는 달리 패킷을 전달받으면, 자신에게 연결된 다른 네트워크 인터페이스로 패킷을 보내주는 식으로 동작하기 때문에 항상 쌍(pair)로 생성해줘야 합니다. 한 쪽에서 다른 쪽으로 패킷을 전송할 수 있으며, 한 쪽이 다운된 경우 나머지 한 쪽도 정상적으로 기능하지 않는 것이 특징입니다. 도커에서는 실행중인 컨테이너 수 만큼 veth로 시작하는 인터페이스가 생성됩니다.

도커 컨테이너 Port를 외부에 노출
컨테이너 포트 연결 명령어
$ docker run -p [HOST IP:PORT]:[CONTAINER PORT] [CONTAINER NAME]

-p: publish 옵션. 호스트 ip 포트를 Container Port와 매핑시키는 역할을 합니다.

아래의 예제들로 포트연결을 해보겠습니다.

예제1. nginx 컨테이너의 80번 포트를 호스트의 모든 IP의 80번 포트와 연결하여 실행
$ docker run -d -p 80:80 nginx

위의 명령어는 호스트의 80번 포트와 컨테이너의 80번 포트를 연결합니다.



실행결과
0.0.0.0:80 -&amp;gt; 80/tcp -&amp;gt; 위의 실행결과에서 Port를 해석하면 모든 호스트 IP의 80번 포트는 컨테이너의 80번 포트로 매핑이 된다는 것을 의미합니다.



curl로 호스트의 80번 포트를 접근해보면 nginx가 출력되는 것을 확인할 수 있습니다.

예제2. nginx 컨테이너의 80번 포트를 호스트의 사용 가능한 포트와 연결하여 실행
$ docker run -d -p 80 nginx

위의 명령어처럼 80번 포트 하나만 지정을 하면 컨테이너 포트만 지정하는 역할을 합니다.

이렇게 되면, 컨테이너 80번 포트를 호스트의 사용가능한 포트를 랜덤으로 지정하여 연결하게 됩니다.



docker ps로 확인해본 결과 컨테이너의 80번 포트를 호스트의 49153포트로 자동으로 연결이 되었습니다.

마찬가지로 curl localhost:49153로 접근을하면 정상적으로 동작하고 curl localhost:80는 동작하지 않습니다.

예제3. nginx 컨테이너의 80번 포트를 호스트의 127.0.0.1 IP의 80번 포트와 연결하여 실행
$ docker run -d -p 127.0.0.1:80:80 nginx

위처럼 컨테이너의 IP까지 지정을 해주면 호스트의 해당 IP에 대해서만 포트(여기선 80번 포트)를 매핑하게 됩니다.

도커 네트워크 드라이버
도커 네트워크 종류



도커 네트워크 드라이버는 Native 드라이버와 Remote 드라이버로 나뉩니다.

Native Drivers -&amp;gt; Bridge, Host, None, Overlay를 사용.

Remote Drivers -&amp;gt; 써드파티 드라이버로 외부에서 잘 만들어진 드라이버를 사용.

네트워크 동작 방식에 따라 드라이버 분류



위 그림은 네트워크 드라이버를 단일 호스트, 다중 호스트로 분류를 한 그림입니다.

네트워크 드라이버는 단일 호스트에서 동작하는 네트워킹, 단일 호스트에서 동작하는 네트워킹이 있습니다.

단일 호스트 네트워크 드라이버 -&amp;gt; Bridge, Host, None 네트워크

다중 호스트 네트워크 드라이버 -&amp;gt; Overlay 네트워크

도커 네트워크 목록 확인
도커 네트워크 목록은 docker netork ls 명령어로 확인 가능합니다.
$ docker network ls




도커 네트워크 확인하기
$ docker network insepct [NETWORK ID or NAME]

도커 네트워크는 docker network inspect 명령어로 확인이 가능합니다.

도커 네트워크 생성하기
도커 네트워크는 docker network create 명령어로 생성할 수 있고, –driver 옵션으로 네트워크 드라이버를 지정할 수 있습니다.
// ex. docker network create --driver=bridge seunghwan-bridge
$ docker network create --driver=[NETWORK DRIVER] [DRIVER NAME]

네트워크 지정 후 컨테이너 실행
도커 네트워크는 docker run 명령어에 –network 옵션으로 네트워크를 지정할 수 있습니다.
$ docker run -d --network=[NETWORK DRIVER] [CONTAINER NAME]

Bridge 네트워크
포트를 연결해 Port를 외부에 노출하는 방식이 이 bridge 네트워크를 이용하는 방식입니다.

위에 있는 예제에서도 네트워크 드라이버를 지정해주지 않았으므로 default로 docker0라는 bridge 네트워크를 사용하고 있습니다.

그리고, 커스텀 bridge 네트워크를 생성해서 사용할 수도 있습니다.

bridge 네트워크를 확인해보면 docker0 브릿지 네트워크인 것을 확인할 수 있습니다.

IP 172.17.0.0을 사용하는 것을 확인할 수 있고 컨테이너를 네트워크 드라이버를 지정하지 않고 생성하면 해당 docker0 브릿지 네트워크를 사용합니다.



Host 네트워크
host 네트워크는 도커가 제공해주는 가상 네트워크(veth)를 사용하는 것이 아니라 직접 host 네트워크에 붙어서 사용하는 개념입니다.

그래서 host 네트워크를 사용할 경우에는 Port 바인딩을 하지 않더라도 host 네트워크를 사용하기 때문에 접속을 할수있게 됩니다.
$ docker run -d --network=host nginx

위 명령어로 호스트 네트워크 드라이버로 nginx를 실행시키면 포트 목록이 보이지 않는 것을 확인할 수 있습니다.



None 네트워크
none 네트워크 드라이버는 해당 컨테이너가 네트워크 기능이 필요없을 때, 혹은 커스텀 네트워킹을 사용해야되는 경우가 있을 때 드라이버를 none으로 설정하고 사용할 수 있습니다.

none 네트워크를 사용해서 컨테이너를 생성하면 외부와의 연결이 단절됩니다.
$ docker run --network none ubuntu:focal

container 네트워크
다른 컨테이너의 네트워크 네임스페이스 환경을 공유할 수 있습니다. 공유되는 속성은 내부 IP, MAC주소입니다.

컨테이너 2개를 생성해주는데 network_container_2가 network_container_1의 네트워크 환경을 공유하도록 설정해줍니다.
$ docker run -it -d -- name network_container_1 ubuntu:18.04
$ docker run -it -d --name network_container_2 --net container:network_container_1 ubuntu:18.04

사용자 정의 네트워크
내부 DNS 서버에 의해 이름 해결이 이루어진다.
내부 DNS 서버를 사용하면, link 기능과 같이 /etc/hosts/ 파일에 의존하지 않고 이름을 해결 할 수있다.
docker0에 연결된 컨테이너들은 ping을 할 때 IP만 가능하지만, 사용자 정의 네트워크에 연결된 컨테이너들은 컨테이너명뿐만 아니라 컨테이너 시작 시 지정한 –net-alias 옵션을 사용한 에일리어스 명칭으로도 통신이 가능하다.
# 컨테이너 구동 시킬 때 결합

docker run --network customNetwork --name container1 containerImage:1

# 컨테이너 구동 후 결합
docker network connect our-net one

",
            "wordcount": "1016",
            "inLanguage": "ko",
            "dateCreated": "2023-04-13/",
            "datePublished": "2023-04-13/",
            "dateModified": "2023-04-13/",
            "author": {
                "@type": "Person",
                "name": "Mr. Anderson",
                
                "image": "/assets/img/uploads/profile.png",
                
                "jobTitle": "The One",
                "url": "http://localhost:4000/authors/mranderson/",
                "sameAs": [
                    "https://github.com/github_username","https://www.facebook.com/facebook_username","https://twitter.com/twitter_username","https://medium.com/@medium_username","https://www.instagram.com/instagram_username","https://www.linkedin.com/in/linkedin_username"
                ]
            },
            "publisher": {
                "@type": "Organization",
                "name": "Teddy-woo's DevOps Challenge!",
                "url": "http://localhost:4000/",
                "logo": {
                    "@type": "ImageObject",
                    "url": "http://localhost:4000/assets/img/blog-image.png",
                    "width": "600",
                    "height": "315"
                }
            },
            "mainEntityOfPage": "True",
            "genre": "Docker",
            "articleSection": "Docker",
            "keywords": ["docker","network","docker netork","DevOps BootCamp"]
        }
        </script>
    </body>
</html>
